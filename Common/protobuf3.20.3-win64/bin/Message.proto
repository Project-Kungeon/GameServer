syntax = "proto3";
package message;

import "Enum.proto";
import "Struct.proto";

enum HEADER
{
	NONE = 0;
	LOGIN_REQ = 1;
	LOGIN_RES = 2;

	ENTER_ROOM_REQ = 3;
	ENTER_ROOM_RES = 4;

	LEAVE_ROOM_REQ = 5;
	LEAVE_ROOM_RES = 6;

	LEAVE_GAME_REQ = 7;
	LEAVE_GAME_RES = 8;

	PLAYER_SPAWN_RES = 9;
	PLAYER_DESPAWN_RES = 10;

	PLAYER_CHAT_REQ = 11;
	PLAYERT_RES = 12;

	PLAYER_MOVE_REQ = 13;
	PLAYER_MOVE_RES = 14;

	PLAYER_ATTACK_REQ = 15;
	PLAYER_ATTACK_RES = 16;

	WARRIOR_ATTACK_REQ = 17;
	WARRIOR_ATTACK_RES = 18;

	WARRIOR_Q_REQ = 19;
	WARRIOR_Q_RES = 20;

	WARRIOR_E_REQ = 21;
	WARRIOR_E_RES = 22;

	WARRIOR_R_REQ = 23;
	WARRIOR_R_RES = 24;
}

// 클라이언트 -> 서버 로그인
message C_Login
{
	// TODO : 인증 정보 넣을지..
}

// 로그인 성공 후, 서버 -> 클라이언트 결과 반환
message S_Login
{
	uint32 success = 1;
	repeated ObjectInfo players = 2;
}

// 방 입장 요청
message C_EnterRoom
{
	PlayerType player_type = 1;
}

// 방 입장 결과
message S_EnterRoom
{
	uint32 success = 1;
	PlayerInfo player_info = 2;
}

// 방 떠나기 요청
message C_LeaveRoom
{

}

// 방 떠나기 결과
message S_LeaveRoom
{

}

// 다른 플레이어 입장 패킷
message S_Spawn
{
	repeated ObjectInfo objects = 1;
	repeated CreatureInfo creatures = 2;
	repeated PlayerInfo players = 3;
}

// 다른 플레이어 퇴장 패킷
message S_Despawn
{
	repeated uint64 object_ids = 1;
}

message C_Move
{
	PosInfo PosInfo = 1;
}

message S_Move
{
	PosInfo PosInfo = 1;
}

message C_Attack
{
	uint64 object_id = 1;
	repeated uint64 target_ids = 2;
	float damage = 3;
}

message S_Attack
{
	uint64 object_id = 1;
	repeated uint64 target_ids = 2;
	float damage = 3;
}

message C_PickUp
{
	uint64 object_id = 1;
	uint64 picked_object_id = 2;
	ItemInfo item_info = 3;
}

message S_PickUp
{
	uint64 object_id = 1;
	uint64 picked_object_id = 2;
}

